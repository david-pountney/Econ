<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var snap_x = (obj_mouse.x/32) * 32;
var snap_y = (obj_mouse.y/32) * 32;

var cell = scr_breadthFirstSearch(instance_position(snap_x, snap_y, obj_normalLand), true);
//show_message(string(cell));

if(cell != noone){
    if(instance_position(cell.x,cell.y,obj_solid) == noone){
        var unit = instance_create(cell.x, cell.y, obj_riflemenUnit);
        unit.government = global.myGov;
        
        //Multiplayer send message
        buffer_seek( global.client.Buffer , buffer_seek_start , 0 );
        buffer_write( global.client.Buffer , buffer_string , "sUNITADD" );
        buffer_write( global.client.Buffer , buffer_u32 , unit.object_index );
        buffer_write( global.client.Buffer , buffer_u16 , unit.x );
        buffer_write( global.client.Buffer , buffer_u16 , unit.y );
        buffer_write( global.client.Buffer , buffer_u32 , global.myGov );
        buffer_write( global.client.Buffer , buffer_string , unit.guid );
    
        result = network_send_packet( global.client.Socket , global.client.Buffer , buffer_tell( global.client.Buffer ) );
    
        scr_recalculatePaths();
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="5" enumb="87">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>view_yview[0] -= 10;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="5" enumb="83">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>view_yview[0] += 10;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="5" enumb="68">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>view_xview[0] += 10;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="5" enumb="65">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>view_xview[0] -= 10;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="58">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var snap_x = (obj_mouse.x/32) * 32;
var snap_y = (obj_mouse.y/32) * 32;

var cell = scr_breadthFirstSearch(instance_position(snap_x, snap_y, obj_normalLand), true);
//show_message(string(cell));

if(cell != noone){
    if(instance_position(cell.x,cell.y,obj_solid) == noone){
        var unit = instance_create(cell.x, cell.y, obj_riflemenUnit);
        unit.government = global.myGov;
        
        //Multiplayer send message
        buffer_seek( global.client.Buffer , buffer_seek_start , 0 );
        buffer_write( global.client.Buffer , buffer_string , "sUNITADD" );
        buffer_write( global.client.Buffer , buffer_u32 , unit.object_index );
        buffer_write( global.client.Buffer , buffer_u16 , unit.x );
        buffer_write( global.client.Buffer , buffer_u16 , unit.y );
        buffer_write( global.client.Buffer , buffer_u32 , global.myGov );
        buffer_write( global.client.Buffer , buffer_string , unit.guid );
    
        result = network_send_packet( global.client.Socket , global.client.Buffer , buffer_tell( global.client.Buffer ) );
    
        scr_recalculatePaths();
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="57">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Move units
var snap_x = (mouse_x/32) * 32;
var snap_y = (mouse_y/32) * 32 ;

var underUnit = instance_position(snap_x,snap_y,obj_unit);

//A unit is underneath mouse
if(underUnit != noone){
    //Amount of units selected is more than 0
    if(global.amountOfUnitsSelected &gt; 0){ 
        show_message("over unit");
        if(underUnit.government == global.myGov){
            exit;
        }
        else
            show_message("ENEMY!!!");
    }
        
}

for (var i = 0; i &lt; instance_number(obj_unit); i += 1)
{
   unit[i] = instance_find(obj_unit,i);
   if(unit[i].selected){
        mp_grid_clear_cell(global.pathfindingGrid, floor(unit[i].x/32), floor(unit[i].y/32));
        
   }
}

var currentPos = 0;
var arrayOfUnits = ds_list_create();

for (var i = 0; i &lt; instance_number(obj_unit); i += 1)
{
   unit[i] = instance_find(obj_unit,i);
   if(unit[i].selected){
        ds_list_add(arrayOfUnits, unit[i]);
   }
}

//Calculate end positions for the units
scr_bfsUnits(instance_position(snap_x, snap_y, obj_normalLand), false, arrayOfUnits );

//Multiplayer send message
buffer_seek( global.client.Buffer , buffer_seek_start , 0 );
buffer_write( global.client.Buffer , buffer_string , "sMOVEUNIT" );
buffer_write( global.client.Buffer , buffer_u8 , ds_list_size(arrayOfUnits) );
buffer_write( global.client.Buffer , buffer_u16 , snap_x );
buffer_write( global.client.Buffer , buffer_u16 , snap_y );

for (var i = 0; i &lt; ds_list_size(arrayOfUnits); i += 1)
{
   unit[i] = ds_list_find_value(arrayOfUnits,i);
   if(unit[i].selected){
        unit[i].moving = true;
        unit[i].pathHaulted = false;
        unit[i].path = path_add();
        
        unit[i].foundPath = scr_definePath(unit[i].x,unit[i].y, (floor(unit[i].endX/32) * 32 + 16), (floor(unit[i].endY/32) * 32 + 16), unit[i].path, unit[i]);

        if(unit[i].foundPath){
            unit[i].x = floor(unit[i].x/32) * 32 + 16;
            unit[i].y = floor(unit[i].y/32) * 32 + 16;
            unit[i].drawPath = true;
            
            with(unit[i])  path_start(path,3,0,1);
        }
        else with(unit[i]) mp_grid_add_cell(global.pathfindingGrid, floor(x/32), floor(y/32));
        
        buffer_write( global.client.Buffer , buffer_string , unit[i].guid );
        //buffer_write( global.client.Buffer , buffer_u16 , arrayOfPositions[currentPos].x );
        //buffer_write( global.client.Buffer , buffer_u16 , arrayOfPositions[currentPos].y );
        
        currentPos++;
   }
}

result = network_send_packet( global.client.Socket , global.client.Buffer , buffer_tell( global.client.Buffer ) );


</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="56">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var land = instance_position(floor(mouse_x/32)*32, floor(mouse_y/32)*32, obj_normalLand)
var business = instance_position(floor(mouse_x/32)*32, floor(mouse_y/32)*32, obj_business)

//show_message("1");
if(global.mode = "buyLand"){
    if(land != noone){
        //show_message("2");
        if(land.government == noone){
            //show_message(global.myGov.color);
            if(script_execute(scr_checkForAdjacentLand,land, global.myGov)){
                if(global.myGov.cash &gt;= global.buyLandCost){
                    land.government = global.myGov;
                    //show_message(global.myGov);
                    //Multiplayer send message
                    buffer_seek( global.client.Buffer , buffer_seek_start , 0 );
                    buffer_write( global.client.Buffer , buffer_string , "sGOVADD" );
                    buffer_write( global.client.Buffer , buffer_u16 , land.x );
                    buffer_write( global.client.Buffer , buffer_u16 , land.y );
                    buffer_write( global.client.Buffer , buffer_u32 , global.myGov );
        
                    result = network_send_packet( global.client.Socket , global.client.Buffer , buffer_tell( global.client.Buffer ) );
                    
                    //if(global.mapMode == "governmentMapMode")
                    //    script_execute(scr_colorGovernments);
                        
                    global.myGov.cash -= global.buyLandCost;
                    
                    symbol = instance_create(land.x,land.y - 64,obj_cashSymbol);
                    symbol.spriteToDraw = spr_redDollar; 
                    //symbol.business = business[i];
                }
            }
        }
        
    }
}


</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>ins = instance_position(mouse_x, mouse_y, obj_business);
//obj_name = object_get_name(object_index);
if(ins) drawDebugMenu = true;
else drawDebugMenu = false;

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="11">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Create base marker
selectedBaseIns = instance_create(mouse_x,mouse_y,obj_baseMarker);
selectedBaseIns.color = global.wheatColor;
selectedBaseIns.selectedBaseObj = selectedBaseObj;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Create business marker
selectedBusinessIns = instance_create(mouse_x,mouse_y,obj_businessMarker);
selectedBusinessIns.color = global.wheatColor;
selectedBusinessIns.selectedBusinessObj = selectedBusinessObj;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="10" enumb="102">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var snap_x = (obj_mouse.x/32) * 32;
var snap_y = (obj_mouse.y/32) * 32;

var cell = scr_breadthFirstSearch(instance_position(snap_x, snap_y, obj_normalLand), false);
//show_message(string(cell));

if(cell != noone){
    if(instance_position(cell.x,cell.y,obj_solid) == noone){
        var unit = instance_create(cell.x, cell.y, obj_riflemenUnit);
        unit.government = global.myGov;
        
        //Multiplayer send message
        buffer_seek( global.client.Buffer , buffer_seek_start , 0 );
        buffer_write( global.client.Buffer , buffer_string , "sUNITADD" );
        buffer_write( global.client.Buffer , buffer_u32 , unit.object_index );
        buffer_write( global.client.Buffer , buffer_u16 , unit.x );
        buffer_write( global.client.Buffer , buffer_u16 , unit.y );
        buffer_write( global.client.Buffer , buffer_u32 , global.myGov );
        buffer_write( global.client.Buffer , buffer_string , unit.guid );
    
        result = network_send_packet( global.client.Socket , global.client.Buffer , buffer_tell( global.client.Buffer ) );
    
        scr_recalculatePaths();
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="10" enumb="101">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>script_execute(scr_colorResource,"iron",global.ironColor);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="10" enumb="100">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>script_execute(scr_colorBusinessWealth);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="10" enumb="99">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>script_execute(scr_colorResource,"wheat",global.wheatColor);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="10" enumb="98">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>global.mapMode = "governmentMapMode";
script_execute(scr_colorGovernments);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="10" enumb="97">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>script_execute(scr_colorResource,"pop",global.populationColor);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="10" enumb="96">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>script_execute(scr_resetMapColor, global.defaultLandColor);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="10" enumb="40">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var land = instance_position(floor(mouse_x/32)*32, floor(mouse_y/32)*32, obj_normalLand)
var business = instance_position(floor(mouse_x/32)*32, floor(mouse_y/32)*32, obj_business)

//show_message("1");
if(land != noone){
    if(land.government == global.myGov){
        if(business == noone){
            militaryBase = instance_create(mouse_x,mouse_y,obj_militaryBase);
        }
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="10" enumb="16">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>trace("Wheat: " + string(obj_wheat.value));
trace("Beer: " + string(obj_beer.value));
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
